<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Список бібізяк</title>
  <style>
    /* Фон з відтінком блакитного і жовтого */
    body {
      background-color: rgba(160, 247, 252, 1); /* Відтінок блакитного з жовтим */
      font-family: Arial, sans-serif;
      padding: 20px;
      text-align: center;
      margin: 0;
      transition: background-color 0.3s ease;
    }

    /* Поля для вводу жовтого кольору */
    input {
      background-color: #FFFB6D; /* Легкий жовтий відтінок */
      border: 2px solid #ccc;
      padding: 10px;
      margin: 10px;
      font-size: 16px;
      border-radius: 5px;
      outline: none;
      width: 250px;
    }

    /* Кнопки */
    button {
      padding: 10px 15px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      border-radius: 5px;
      margin: 10px;
      color: white;
      font-weight: bold;
      transition: background 0.3s ease;
      background: linear-gradient(to right, #808080, #B84D61); /* Сіро-буро малиновий */
    }

    button:hover {
      background: linear-gradient(to right, #00BFFF, #FF4500); /* Голубий червоний */
    }

    /* Кнопка палітри */
    .color-picker-btn {
      background-color: white;
      border: 2px solid #ccc;
      padding: 10px 15px;
      color: black;
      font-weight: normal;
      border-radius: 5px;
      cursor: pointer;
      margin: 10px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .color-picker-btn:hover {
      background-color: #f0f0f0;
    }

    /* Список */
    ul {
      list-style-type: none;
      padding: 0;
      margin-top: 20px;
    }

    li {
      font-size: 18px;
      padding: 10px;
      background-color: #fff;
      margin: 5px auto;
      border-radius: 5px;
      width: fit-content;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      color: #FF8C00; /* Оранжевий для заголовка */
      font-size: 32px;
      margin-bottom: 20px;
    }

    .delete-btn {
      background-color: #FF6347; /* Червоний для видалення */
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 3px;
      cursor: pointer;
    }

    .delete-btn:hover {
      background-color: #FF4500;
    }

    /* Стилі для кіл */
    .circle {
      position: absolute;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background-color: rgba(0, 0, 255, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-size: 14px;
      pointer-events: none;
      user-select: none;
    }
  </style>
</head>
<body>

  <h1>Список бібізяк</h1>

  <label for="first-name">Ім'я:</label><br>
  <input type="text" id="first-name" placeholder="Введіть ім'я"><br>

  <label for="last-name">Прізвище:</label><br>
  <input type="text" id="last-name" placeholder="Введіть прізвище"><br>

  <label for="patronymic">По батькові (не обов'язково):</label><br>
  <input type="text" id="patronymic" placeholder="Введіть по батькові"><br>

  <button onclick="addBibizyaky()">Додати бібізяку</button>

  <h2>Бібізяки:</h2>
  <ul id="bibizyaky-list"></ul>

  <button onclick="downloadBibizyaky()">Завантажити список</button>
  <button onclick="startGame()">Почати гру</button>

  <!-- Кнопка для вибору кольору фону -->
  <button class="color-picker-btn" onclick="openColorPicker()">Вибрати колір фону</button>
  <input type="color" id="color-picker" style="display:none;" onchange="changeBackgroundColor(event)">

  <script>
    const bibizyaky = JSON.parse(localStorage.getItem('bibizyaky')) || [];

    function addBibizyaky() {
      const firstName = document.getElementById('first-name').value.trim();
      const lastName = document.getElementById('last-name').value.trim();
      const patronymic = document.getElementById('patronymic').value.trim();

      // Якщо є хоча б ім'я та прізвище, то додаємо бібізяку
      if (firstName && lastName) {
        const fullName = patronymic ? `${firstName} ${lastName} ${patronymic}` : `${firstName} ${lastName}`;
        bibizyaky.push(fullName);

        // Зберігаємо список у localStorage
        localStorage.setItem('bibizyaky', JSON.stringify(bibizyaky));

        // Очищаємо поля введення
        document.getElementById('first-name').value = '';
        document.getElementById('last-name').value = '';
        document.getElementById('patronymic').value = '';

        displayBibizyakyList();
      } else {
        alert("Будь ласка, заповніть хоча б ім'я та прізвище!");
      }
    }

    function removeBibizyaka(index) {
      bibizyaky.splice(index, 1);
      localStorage.setItem('bibizyaky', JSON.stringify(bibizyaky));
      displayBibizyakyList();
    }

    function displayBibizyakyList() {
      const list = document.getElementById('bibizyaky-list');
      list.innerHTML = '';

      bibizyaky.forEach((name, index) => {
        const listItem = document.createElement('li');
        listItem.innerHTML = ` 
          <span>${name}</span>
          <button class="delete-btn" onclick="removeBibizyaka(${index})">Видалити</button>
        `;
        list.appendChild(listItem);
      });
    }

    function downloadBibizyaky() {
      const blob = new Blob([bibizyaky.join('\n')], { type: 'text/plain' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'bibizyaky.txt';
      link.click();
    }

    // Відображення списку при завантаженні сторінки
    displayBibizyakyList();

    // Логіка для гри
    let gameActive = false;
    let circles = [];

    function startGame() {
      gameActive = true;
      circles = [];
      bibizyaky.forEach((name, index) => {
        const circle = document.createElement('div');
        circle.classList.add('circle');
        circle.textContent = name;
        document.body.appendChild(circle);
        circles.push(circle);
      });

      // Позиція курсора
      document.addEventListener('mousemove', moveCircles);
    }

    function moveCircles(event) {
      if (!gameActive) return;

      circles.forEach(circle => {
        const mouseX = event.clientX;
        const mouseY = event.clientY;
        const circleX = circle.offsetLeft + circle.offsetWidth / 2;
        const circleY = circle.offsetTop + circle.offsetHeight / 2;

        const angle = Math.atan2(mouseY - circleY, mouseX - circleX);
        const speed = 5; // Швидкість руху
        const dx = Math.cos(angle) * speed;
        const dy = Math.sin(angle) * speed;

        // Рухаємо коло
        circle.style.left = `${circle.offsetLeft + dx}px`;
        circle.style.top = `${circle.offsetTop + dy}px`;

        // Перевірка на колізії
        circles.forEach(otherCircle => {
          if (circle !== otherCircle) {
            const distX = circle.offsetLeft - otherCircle.offsetLeft;
            const distY = circle.offsetTop - otherCircle.offsetTop;
            const distance = Math.sqrt(distX * distX + distY * distY);

            // Якщо кола надто близько одне до одного
            if (distance < 60) { // 60 - це сумарний радіус двох кіл
              const angleBetweenCircles = Math.atan2(distY, distX);
              const pushSpeed = 3; // Швидкість відштовхування
              const pushX = Math.cos(angleBetweenCircles) * pushSpeed;
              const pushY = Math.sin(angleBetweenCircles) * pushSpeed;

              // Відштовхуємо кола
              circle.style.left = `${circle.offsetLeft + pushX}px`;
              circle.style.top = `${circle.offsetTop + pushY}px`;

              otherCircle.style.left = `${otherCircle.offsetLeft - pushX}px`;
              otherCircle.style.top = `${otherCircle.offsetTop - pushY}px`;
            }
          }
        });
      });
    }

    function openColorPicker() {
      document.getElementById('color-picker').click();
    }

    function changeBackgroundColor(event) {
      document.body.style.backgroundColor = event.target.value;
    }
  </script>

</body>
</html>
